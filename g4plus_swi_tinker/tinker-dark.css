/* =============================================================================
   THÈME LEUVEN DARK - Optimized for G4-mic & Emacs compatibility
   Based on Leuven by Fabrice Niessen
   ============================================================================= */

:root {
    --margin: 10px;
    /* Couleurs Leuven Dark - palette harmonieuse inspirée de Doom One */
    --leuven-bg: #282c34;           /* Fond principal doux */
    --leuven-bg-alt: #21252b;       /* Fond alternatif plus sombre */
    --leuven-bg-highlight: #2c313a; /* Fond pour éléments mis en valeur */
    --leuven-fg: #bbc2cf;           /* Texte principal clair */
    --leuven-fg-alt: #5b6268;       /* Texte secondaire */
    --leuven-fg-dim: #3f444a;       /* Texte très discret */
    --leuven-border: #464950;       /* Bordures subtiles */
    
    /* Couleurs sémantiques - palette Leuven adaptée */
    --leuven-red: #ff6c6b;          /* Erreurs, refutations */
    --leuven-green: #98be65;        /* Succès, validité */
    --leuven-blue: #51afef;         /* Info, liens */
    --leuven-purple: #c678dd;       /* Keywords, mots-clés */
    --leuven-yellow: #ecbe7b;       /* Warnings, avertissements */
    --leuven-orange: #da8548;       /* Accents secondaires */
    --leuven-cyan: #46d9ff;         /* Métadonnées */
    
    /* Couleurs spéciales pour G4-mic */
    --proof-success: #98be65;       /* Preuves valides ✅ */
    --proof-failure: #ff6c6b;       /* Réfutations ❌ */
    --proof-warning: #ecbe7b;       /* Avertissements ⚠️ */
    --box-drawing: #51afef;         /* Box Unicode */
}

html {
    height: 100%;
}

body {
    display: flex;
    flex-direction: column;
    width: 100%; height: 100%; margin: var(--margin);
    overflow: hidden;
    background: var(--leuven-bg) !important;
    color: var(--leuven-fg) !important;
    font-family: 'Monaco', 'DejaVu Sans Mono', 'Fira Code', monospace !important;
}

.header {
    padding-bottom: 5px;
    background: var(--leuven-bg) !important;
    color: var(--leuven-fg) !important;
    border-bottom: 1px solid var(--leuven-border) !important;
}

#logo {
    width: 5ex;
    float: left;
    margin-right: 2ex;
}

#owl-link {
    position: absolute;
    top: var(--margin);
    right: 120px;
    display: inline-block;
}

#owl-logo {
    width: 40px !important;
    height: 40px !important;
    display: block !important;
    filter: brightness(0.9); /* Légèrement atténué sur fond sombre */
}

div.github-buttons {
    position: absolute;
    top: var(--margin);
    right: var(--margin);
    display: inline-block;
    float: right;
}

.content {
    position: relative;
    flex-grow: 1;
    display: flex;
    flex-direction: row;
    width: calc(100% - 2*var(--margin));
    background: var(--leuven-bg) !important;
}

#left, #right {
    position: relative;
    box-sizing: border-box;
    height: calc(100% - 2*var(--margin));
    background: var(--leuven-bg) !important;
    border: 1px solid var(--leuven-border) !important;
}

div.tinker-source {
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.tinker-console-wrapper {
    box-sizing: border-box;
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    height: 100%;
    width: 100%;
    padding: 5px;
    overflow: auto; display: flex; flex-direction: column-reverse;
    border: 1px solid var(--leuven-border) !important;
    background: var(--leuven-bg) !important;
    color: var(--leuven-fg) !important;
}
.tinker-scroll-start-at-top { flex: 1 1 0%; }

.source-files button, .source-files select { 
    height: 26px; 
    background: var(--leuven-bg-alt) !important;
    color: var(--leuven-fg) !important;
    border: 1px solid var(--leuven-border) !important;
}
.source-files select option.url { color: var(--leuven-blue) !important; }
.source-files .create-file { display: none; }
.tinker-source.create-file .source-files .create-file { display: inline; }

.editor-wrapper {
    border: 1px solid var(--leuven-border) !important;
    padding: 1px;
    position: relative;
    flex-grow: 1;
    background: var(--leuven-bg) !important;
}

.editor-wrapper div[name=editor] {
    box-sizing: border-box;
    border: 0px;
    resize: none;
    width: 100%; height: 100%;
}

.CodeMirror {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    height: 100%;
    width: 100%;
    font-size: 130%;
    background: var(--leuven-bg) !important;
    color: var(--leuven-fg) !important;
}

/* =============================================================================
   CORRESPONDANCE PARENTHÈSES ÉDITEUR - Version Dark optimisée
   ============================================================================= */
.CodeMirror-matchingbracket {
    background: rgba(236, 190, 123, 0.2) !important; /* Jaune subtil */
    color: var(--leuven-yellow) !important;
    font-weight: bold !important;
    border: 2px solid var(--leuven-purple) !important;
    box-shadow: 0 0 8px rgba(198, 120, 221, 0.5) !important;
}

.CodeMirror-cursor { border-color: var(--leuven-fg) !important; }
.CodeMirror-selected { background: #3e4451 !important; } /* Sélection visible */

/* Coloration syntaxique - palette Leuven Dark */
.cm-keyword { color: var(--leuven-purple) !important; font-weight: bold !important; }
.cm-comment { color: var(--leuven-fg-alt) !important; font-style: italic !important; }
.cm-string { color: var(--leuven-green) !important; }
.cm-variable { color: var(--leuven-fg) !important; }
.cm-variable-2 { color: var(--leuven-cyan) !important; }
.cm-def { color: var(--leuven-orange) !important; font-weight: bold !important; }
.cm-number { color: var(--leuven-orange) !important; }
.cm-operator { color: var(--leuven-red) !important; }
.cm-builtin { color: var(--leuven-blue) !important; }
.cm-atom { color: var(--leuven-orange) !important; }

.source-buttons {
    margin-top: var(--margin);
}

.source-buttons button {
    background: var(--leuven-bg-alt) !important;
    color: var(--leuven-fg) !important;
    border: 1px solid var(--leuven-border) !important;
    padding: 5px 10px;
    transition: all 0.2s ease;
}

.source-buttons button:hover {
    background: var(--leuven-blue) !important;
    color: var(--leuven-bg) !important;
    border-color: var(--leuven-blue) !important;
}

/* =============================================================================
   PROLOG CONSOLE - Optimisé pour G4-mic
   ============================================================================= */

.tinker-input {
    margin-top: 5px;
    box-sizing: border-box;
    width: 100%;
}

div.tinker-trace > button.nodebug > span,
button.tinker-query-run > span {
    position: relative;
    top: -1px;
}

button.tinker-query-run {
    color: var(--leuven-blue) !important;
}

.tinker-more, .tinker-trace { margin-left: 3ex; }

.tinker-input, .tinker-more, .tinker-trace,
.tinker-abort, .tinker-keyboard { display: none }

.tinker-query.read          .query-header    { display: none }
.tinker-query.read          .tinker-input    { display: flex }
.tinker-query.prompt        .tinker-input    { display: flex }
.tinker-query.more          .tinker-more     { display: inline-block }
.tinker-query.trace         .tinker-trace    { display: inline-block }
.tinker-query.run:not(.key) .tinker-abort    { display: block }
.tinker-query.key           .tinker-keyboard { display: block }

/* ZONE DE SAISIE AVEC CORRESPONDANCE PARENTHÈSES */
.tinker-input input { 
    flex-grow: 1; 
    margin-left: 10px;
    background: var(--leuven-bg-alt) !important;
    color: var(--leuven-fg) !important;
    border: 2px solid var(--leuven-green) !important; /* Vert par défaut */
    padding: 6px 10px !important;
    border-radius: 4px !important;
    transition: all 0.3s ease !important;
}

/* États des parenthèses dans la zone de saisie */
.tinker-input input.parens-unbalanced {
    border-color: var(--leuven-red) !important;
    background: rgba(255, 108, 107, 0.1) !important;
}

.tinker-input input.parens-highlight {
    box-shadow: 0 0 0 2px rgba(198, 120, 221, 0.4) !important;
}

.tinker-keyboard:focus { outline: 0px; }
.tinker-keyboard > span { 
    color: var(--leuven-fg-alt) !important; 
    font-style: italic; 
    font-size: 90%; 
}

/* =============================================================================
   OUTPUT CONSOLE - Optimisé pour G4-mic avec box-drawing
   ============================================================================= */

.tinker-console-output {
    font-family: 'Fira Code', 'DejaVu Sans Mono', monospace;
    word-break: break-all;
    overflow-wrap: break-word;
    white-space: normal;
    color: var(--leuven-fg) !important;
}

.tinker-console-output div {
    white-space: pre-wrap;     /* Respecte les sauts de ligne */
    font-family: 'Fira Code', 'Monaco', monospace; /* Police à chasse fixe */
    line-height: 1.5;          /* Espacement vertical amélioré */
}

.stderr, .stdout, .query-header {
    white-space: pre-wrap;
    font-family: 'Fira Code', 'Monaco', monospace;
    word-break: break-all;
    overflow-wrap: break-word;
}

.underline { 
    text-decoration: underline; 
    color: var(--leuven-red) !important; 
}

div.write { display: contents; }

div.query-header, span.prompt { 
    font-weight: bold; 
    color: var(--leuven-fg) !important;
}

div.query-header span.query-prompt { margin-right: 1ex; }

.query-header { 
    margin-top: 5px; 
    padding: 3px 0px; 
    display: block; 
    background-color: var(--leuven-bg-highlight) !important;
    color: var(--leuven-fg) !important;
    border-left: 4px solid var(--leuven-blue) !important;
}

.tinker-query.engine .query-header { 
    background: var(--leuven-bg-highlight) !important; 
    border-left: 4px solid var(--leuven-green) !important;
}

.query-answer:nth-child(even) { 
    background-color: rgba(33, 37, 43, 0.5) !important; 
}

.tinker-query, .query-answer { position: relative; }

span.query-buttons { 
    position: absolute; 
    right: 5px; 
    top: 1px; 
    padding: 0px; 
    margin: 0px;
    cursor: pointer; 
    color: var(--leuven-fg-alt) !important;
}

span.query-buttons > span { margin-left: 0.5ex; border: 1px;}

span.query-buttons > span:hover { 
    color: var(--leuven-red) !important; 
    border: 1px solid var(--leuven-red) !important;
}

.tinker-query.collapsed > .query-answers { display: none; }
.tinker-query span.query-collapse:before { content: "\1401" }
.tinker-query.collapsed span.query-collapse:before { content: "\1405" }
span.query-collapse { font-size: 90%; }

span.exch-files {
    float: right;
    text-decoration: none;
}

span.exch-files input.upload-file { display: none; }
span.exch-files.upload-armed input.upload-file { display: inline; }

/* =============================================================================
   BOUTONS COPY-LATEX - Style Dark élégant
   ============================================================================= */
.latex-copy-btn {
    display: inline-block;
    margin-left: 10px;
    padding: 2px 8px;
    background: var(--leuven-bg-highlight) !important;
    color: var(--leuven-cyan) !important;
    border: 1px solid var(--leuven-border) !important;
    border-radius: 3px !important;
    cursor: pointer !important;
    font-size: 11px !important;
    font-family: sans-serif !important;
    transition: all 0.2s ease;
}

.latex-copy-btn:hover {
    background: var(--leuven-cyan) !important;
    color: var(--leuven-bg) !important;
    border-color: var(--leuven-cyan) !important;
}

/* Texte en gras (true, etc.) en vert comme time/1 */
.bold { 
    font-weight: bold; 
    color: var(--leuven-green) !important; 
}

/* =============================================================================
   TRACE & SEARCH - Couleurs adaptées pour fond sombre
   ============================================================================= */
.CodeMirror-search-match {
    background-color: rgba(236, 190, 123, 0.3) !important;
    color: var(--leuven-fg) !important;
    border: 1px solid var(--leuven-yellow) !important;
}

.CodeMirror-trace-call      { background-color: rgba(81, 175, 239, 0.3) !important; }
.CodeMirror-trace-exit      { background-color: rgba(152, 190, 101, 0.3) !important; }
.CodeMirror-trace-fail      { background-color: rgba(255, 108, 107, 0.3) !important; }
.CodeMirror-trace-redo      { background-color: rgba(236, 190, 123, 0.3) !important; }
.CodeMirror-trace-exception { background-color: rgba(198, 120, 221, 0.3) !important; }

/* =============================================================================
   FORÇAGE OUTPUT G4-MIC - Taille et espacement optimaux
   ============================================================================= */
.answer, .console-output, [class*="output"], [class*="answer"] {
    font-size: 16px !important;
    line-height: 1.7 !important;
    font-family: 'Fira Code', 'Monaco', monospace !important;
    color: var(--leuven-fg) !important;
}

/* Cible large pour attraper tout l'output */
div, pre, span {
    font-size: 16px !important;
}

/* FORÇAGE INPUT - CodeMirror */
.CodeMirror, .cm-editor, .cm-content, .cm-line {
    font-size: 16px !important;
    font-family: 'Fira Code', 'Monaco', 'Menlo', monospace !important;
    background: var(--leuven-bg) !important;
    color: var(--leuven-fg) !important;
}

/* Cibler spécifiquement la zone d'édition */
#left .CodeMirror, #left .cm-editor {
    font-size: 16px !important;
}

/* =============================================================================
   LIENS - Style Dark
   ============================================================================= */
.header a {
    color: var(--leuven-blue) !important;
    text-decoration: none;
    transition: all 0.2s ease;
}

.header a:hover {
    color: var(--leuven-cyan) !important;
    text-decoration: underline;
}

/* =============================================================================
   BOX-DRAWING UNICODE - Mise en valeur pour G4-mic
   ============================================================================= */
/* Améliore la visibilité des box-drawing characters */
.tinker-console-output div {
    white-space: pre-wrap;
    font-family: 'Fira Code', 'Monaco', monospace;
    line-height: 1.5;
    letter-spacing: 0.05em; /* Légèrement espacé pour clarté */
}

/* Coloration subtile des caractères box-drawing */
/* Les caractères Unicode ╔═╗║ etc. seront légèrement bleutés */
.tinker-console-output {
    color: var(--leuven-fg) !important;
}

/* =============================================================================
   IMAGES FITCH - Bordure adaptée au thème sombre
   ============================================================================= */
img[alt="Preuve Fitch"] {
    display: block;
    margin: 10px 0;
    max-width: 100%;
    border: 1px solid var(--leuven-border);
    background: var(--leuven-bg-alt); /* Fond pour images claires */
    padding: 5px;
}

/* =============================================================================
   SCROLLBARS - Style Dark élégant
   ============================================================================= */
/* Pour Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--leuven-fg-alt) var(--leuven-bg-alt);
}

/* Pour Chrome, Edge, Safari */
::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

::-webkit-scrollbar-track {
    background: var(--leuven-bg-alt);
    border-radius: 6px;
}

::-webkit-scrollbar-thumb {
    background: var(--leuven-fg-alt);
    border-radius: 6px;
    border: 2px solid var(--leuven-bg-alt);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--leuven-fg);
}

::-webkit-scrollbar-corner {
    background: var(--leuven-bg-alt);
}

/* =============================================================================
   STYLES SPÉCIFIQUES G4-MIC - Emojis et symboles de substitution
   ============================================================================= */

/* Les triangles de warning (⚠️) s'affichent en jaune */
/* Les croix vertes (✅) s'affichent en vert */
/* Les X rouges (❌) s'affichent en rouge */
/* Ces symboles sont gérés par le terminal mais on peut ajuster le contraste */

/* Amélioration du contraste pour les symboles Unicode */
.tinker-console-output {
    text-shadow: 0 0 1px rgba(187, 194, 207, 0.1); /* Légère aura pour meilleure lisibilité */
}

/* =============================================================================
   VARIABLES CSS POUR EMACS - À copier dans custom-theme-set-faces
   ============================================================================= */

/*
CORRESPONDANCE COULEURS POUR EMACS LEUVEN-DARK:

Background:           #282c34  (leuven-bg)
Background-alt:       #21252b  (leuven-bg-alt)
Foreground:           #bbc2cf  (leuven-fg)
Foreground-dim:       #5b6268  (leuven-fg-alt)
Border:               #464950  (leuven-border)

Keywords:             #c678dd  (leuven-purple)
Strings:              #98be65  (leuven-green)
Comments:             #5b6268  (leuven-fg-alt)
Functions:            #da8548  (leuven-orange)
Variables:            #bbc2cf  (leuven-fg)
Constants:            #da8548  (leuven-orange)
Type:                 #51afef  (leuven-blue)
Builtin:              #51afef  (leuven-blue)
Operators:            #ff6c6b  (leuven-red)

Success (magit):      #98be65  (leuven-green)
Error:                #ff6c6b  (leuven-red)
Warning:              #ecbe7b  (leuven-yellow)
Info:                 #51afef  (leuven-blue)

Exemple d'utilisation dans Emacs:
(custom-theme-set-faces
 'leuven-dark
 '(default ((t (:background "#282c34" :foreground "#bbc2cf"))))
 '(font-lock-keyword-face ((t (:foreground "#c678dd" :weight bold))))
 '(font-lock-string-face ((t (:foreground "#98be65"))))
 '(font-lock-comment-face ((t (:foreground "#5b6268" :slant italic))))
 ...)
*/
